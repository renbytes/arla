
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ARLA is a framework for building complex, multi-agent simulations with a focus on emergent behavior and artificial intelligence.">
      
      
        <meta name="author" content="Bordumb / Renbytes">
      
      
        <link rel="canonical" href="https://renbytes.github.io/arla/architecture/">
      
      
        <link rel="prev" href="../guides/understanding-output/">
      
      
        <link rel="next" href="../developer/creating-actions/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Architecture - Affective Reinforcement Learning Agents (ARLA)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#arla-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Affective Reinforcement Learning Agents (ARLA)" class="md-header__button md-logo" aria-label="Affective Reinforcement Learning Agents (ARLA)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Affective Reinforcement Learning Agents (ARLA)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/renbytes/arla" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    arla
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../tutorials/first-simulation/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../guides/installation/" class="md-tabs__link">
          
  
  
  User Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Developer Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../contributing/setup/" class="md-tabs__link">
          
  
  
  Contributor's Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/agent-core/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../blog/" class="md-tabs__link">
        
  
  
    
  
  ARLA Development Blog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Affective Reinforcement Learning Agents (ARLA)" class="md-nav__button md-logo" aria-label="Affective Reinforcement Learning Agents (ARLA)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Affective Reinforcement Learning Agents (ARLA)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/renbytes/arla" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    arla
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/first-simulation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building Your First Simulation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/running-simulations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Simulations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/understanding-output/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding the Output
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Developer Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-architectural-principles" class="md-nav__link">
    <span class="md-ellipsis">
      Core Architectural Principles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Architectural Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-oriented-design" class="md-nav__link">
    <span class="md-ellipsis">
      Data-Oriented Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous Concurrency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decoupled-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Decoupled Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#world-agnostic-engine" class="md-nav__link">
    <span class="md-ellipsis">
      World-Agnostic Engine
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      High-Level Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cognitive-architecture-components" class="md-nav__link">
    <span class="md-ellipsis">
      Cognitive Architecture Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cognitive Architecture Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-making-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Decision-Making Pipeline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emotional-dynamics" class="md-nav__link">
    <span class="md-ellipsis">
      Emotional Dynamics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-integration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      System Integration Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System Integration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provider-pattern-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Provider Pattern Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-driven-state-management" class="md-nav__link">
    <span class="md-ellipsis">
      Event-Driven State Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrent-system-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Concurrent System Execution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scalability-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Scalability Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#llm-integration-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      LLM Integration Optimization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#research-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Research Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Research Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ablation-studies" class="md-nav__link">
    <span class="md-ellipsis">
      Ablation Studies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emergent-behavior-studies" class="md-nav__link">
    <span class="md-ellipsis">
      Emergent Behavior Studies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reproducibility-features" class="md-nav__link">
    <span class="md-ellipsis">
      Reproducibility Features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-points" class="md-nav__link">
    <span class="md-ellipsis">
      Extension Points
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension Points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-cognitive-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New Cognitive Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-new-provider-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Creating New Provider Interfaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#world-integration" class="md-nav__link">
    <span class="md-ellipsis">
      World Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer/creating-actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a New Action
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer/creating-systems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a New System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer/event-bus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Event Bus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributor's Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contributor's Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/style-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coding Standards & Style
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Tests
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/agent-core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    agent-core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/agent-engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    agent-engine
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../blog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ARLA Development Blog
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-architectural-principles" class="md-nav__link">
    <span class="md-ellipsis">
      Core Architectural Principles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Architectural Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-oriented-design" class="md-nav__link">
    <span class="md-ellipsis">
      Data-Oriented Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous Concurrency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decoupled-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Decoupled Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#world-agnostic-engine" class="md-nav__link">
    <span class="md-ellipsis">
      World-Agnostic Engine
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      High-Level Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cognitive-architecture-components" class="md-nav__link">
    <span class="md-ellipsis">
      Cognitive Architecture Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cognitive Architecture Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-making-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Decision-Making Pipeline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emotional-dynamics" class="md-nav__link">
    <span class="md-ellipsis">
      Emotional Dynamics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-integration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      System Integration Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="System Integration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provider-pattern-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Provider Pattern Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-driven-state-management" class="md-nav__link">
    <span class="md-ellipsis">
      Event-Driven State Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrent-system-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Concurrent System Execution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scalability-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Scalability Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#llm-integration-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      LLM Integration Optimization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#research-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Research Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Research Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ablation-studies" class="md-nav__link">
    <span class="md-ellipsis">
      Ablation Studies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emergent-behavior-studies" class="md-nav__link">
    <span class="md-ellipsis">
      Emergent Behavior Studies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reproducibility-features" class="md-nav__link">
    <span class="md-ellipsis">
      Reproducibility Features
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-points" class="md-nav__link">
    <span class="md-ellipsis">
      Extension Points
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension Points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-cognitive-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New Cognitive Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-new-provider-interfaces" class="md-nav__link">
    <span class="md-ellipsis">
      Creating New Provider Interfaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#world-integration" class="md-nav__link">
    <span class="md-ellipsis">
      World Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="arla-architecture">ARLA Architecture</h1>
<p>The ARLA framework is engineered for modularity and extensibility, enabling the construction of sophisticated agent-based simulations with cognitively rich behaviors. At its core, the architecture leverages the Entity Component System (ECS) pattern to enforce strict separation between data and logic, fostering rapid experimentation and research.</p>
<div class="admonition info">
<p class="admonition-title">Design Philosophy</p>
<p>ARLA's architecture prioritizes <strong>modularity</strong>, <strong>performance</strong>, and <strong>research reproducibility</strong>. Every design decision supports the ability to isolate, test, and modify individual cognitive components without affecting the broader system.</p>
</div>
<h2 id="core-architectural-principles">Core Architectural Principles</h2>
<h3 id="data-oriented-design">Data-Oriented Design</h3>
<p>At the heart of ARLA is the ECS pattern, which provides clear separation of concerns:</p>
<div class="grid cards">
<ul>
<li>
<p><strong>Entities</strong></p>
<hr />
<p>Unique identifiers representing agents or environmental objects. Think of them as database primary keys.</p>
</li>
<li>
<p><strong>Components</strong></p>
<hr />
<p>Pure data structures containing an agent's state (memory, health, position). No logic allowed.</p>
</li>
<li>
<p><strong>Systems</strong></p>
<hr />
<p>All operational logic that processes entities with specific component combinations.</p>
</li>
</ul>
</div>
<p>This separation makes simulation state transparent, easy to debug, and simple to serialize for analysis.</p>
<h3 id="asynchronous-concurrency">Asynchronous Concurrency</h3>
<p>All systems are designed to be non-blocking and execute concurrently via an asynchronous scheduler. This architecture is critical for performance, especially when integrating I/O-bound operations like Large Language Model calls.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li><strong>Scalability</strong>: Handle thousands of agents with concurrent system execution</li>
<li><strong>Responsiveness</strong>: Non-blocking LLM calls don't freeze the simulation</li>
<li><strong>Flexibility</strong>: Switch between async and deterministic execution modes</li>
</ul>
<h3 id="decoupled-communication">Decoupled Communication</h3>
<p>Systems operate in isolation and communicate indirectly through a central Event Bus. This event-driven approach ensures new functionality can be added without modifying existing systems.</p>
<pre class="mermaid"><code>graph TD
    A[System A] --&gt; B[Event Bus]
    C[System B] --&gt; B
    D[System C] --&gt; B
    B --&gt; E[System D]
    B --&gt; F[System E]
    B --&gt; G[System F]</code></pre>
<p><strong>Event Flow Example:</strong>
* ActionSystem publishes "action_executed" events
* ReflectionSystem, QLearningSystem, and IdentitySystem all subscribe
* Each processes the event independently without knowing about the others</p>
<h3 id="world-agnostic-engine">World-Agnostic Engine</h3>
<p>The agent-engine is fundamentally agnostic to the rules of any specific simulation. World-specific logic—such as physics, valid actions, or environmental interactions—is injected through clearly defined provider interfaces.</p>
<p><strong>Architecture Benefits:</strong></p>
<ul>
<li><strong>Reusability</strong>: Same cognitive engine works across different simulation worlds</li>
<li><strong>Testability</strong>: Mock providers enable isolated testing of cognitive systems</li>
<li><strong>Modularity</strong>: Swap world implementations without changing agent logic</li>
</ul>
<hr />
<h2 id="high-level-architecture">High-Level Architecture</h2>
<p>The diagram below illustrates the data flow and control between ARLA's primary architectural layers:</p>
<pre class="mermaid"><code>graph TB
    subgraph "Simulation Layer (e.g., soul_sim)"
        A[World-Specific Systems &amp; Components]
        B[Action Implementations]
        C[Provider Implementations]
        D[Scenario Configuration]
    end

    subgraph "Core Engine (agent-engine)"
        E[Simulation Manager] --&gt; F{Main Loop}
        F --&gt; G[System Manager]
        G --&gt; H[Event Bus]
        G --&gt; I[Async System Runner]
        I --&gt; J[Cognitive Systems]
        J --&gt; K[Reflection System]
        J --&gt; L[Q-Learning System]
        J --&gt; M[Identity System]
        J --&gt; N[Goal System]
        H &lt;--&gt; J
    end

    subgraph "Core Abstractions (agent-core)"
        O[Simulation State] --&gt; P[Entities &amp; Components]
        Q[Action Interfaces]
        R[Provider Interfaces]
        S[System Base Classes]
    end

    subgraph "Infrastructure"
        T[Database Layer]
        U[MLflow Tracking]
        V[Configuration Management]
    end

    A --&gt; O
    B --&gt; Q
    C --&gt; R
    D --&gt; V
    J --&gt; O
    E --&gt; T
    E --&gt; U

    style E fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    style O fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style H fill:#fff3e0,stroke:#e65100,stroke-width:2px</code></pre>
<p><strong>Layer Responsibilities:</strong></p>
<ul>
<li><strong>Simulation Layer</strong>: World-specific implementations and configurations</li>
<li><strong>Core Engine</strong>: Cognitive architecture and simulation orchestration</li>
<li><strong>Core Abstractions</strong>: Framework contracts and base implementations</li>
<li><strong>Infrastructure</strong>: Data persistence, experiment tracking, and configuration</li>
</ul>
<hr />
<h2 id="cognitive-architecture-components">Cognitive Architecture Components</h2>
<p>ARLA implements a comprehensive cognitive architecture inspired by theories from psychology and cognitive science.</p>
<h3 id="memory-systems">Memory Systems</h3>
<p>Agents maintain multiple memory types with different characteristics:</p>
<pre class="mermaid"><code>graph LR
    A[Working Memory] --&gt; B[Episodic Memory]
    B --&gt; C[Semantic Memory]
    D[Emotional Memory] --&gt; B
    E[Social Memory] --&gt; B

    subgraph "Retention Characteristics"
        F[Short-term: 5-10 experiences]
        G[Medium-term: 100s of episodes]
        H[Long-term: Consolidated knowledge]
        I[Enhanced: Emotionally significant]
        J[Relationship: Agent interactions]
    end

    A -.-&gt; F
    B -.-&gt; G
    C -.-&gt; H
    D -.-&gt; I
    E -.-&gt; J</code></pre>
<h3 id="decision-making-pipeline">Decision-Making Pipeline</h3>
<p>The cognitive decision-making process follows a sophisticated multi-stage pipeline:</p>
<pre class="mermaid"><code>graph TD
    A[Perception] --&gt; B[Working Memory Update]
    B --&gt; C[Goal Activation]
    C --&gt; D[Action Generation]
    D --&gt; E[Utility Estimation]
    E --&gt; F[Action Selection]
    F --&gt; G[Execution]
    G --&gt; H[Outcome Evaluation]
    H --&gt; I[Learning Update]
    I --&gt; J[Memory Consolidation]

    subgraph "Cognitive Modulation"
        K[Emotional State]
        L[Identity Consistency]
        M[Social Context]
    end

    K --&gt; E
    L --&gt; F
    M --&gt; D</code></pre>
<h3 id="emotional-dynamics">Emotional Dynamics</h3>
<p>Emotions emerge from appraisal patterns based on established psychological theory:</p>
<div class="grid cards">
<ul>
<li>
<p><strong>Goal Relevance</strong></p>
<hr />
<p>How much does this event matter to the agent's current objectives?</p>
</li>
<li>
<p><strong>Controllability</strong></p>
<hr />
<p>Can the agent influence the outcome of this situation?</p>
</li>
<li>
<p><strong>Value Alignment</strong></p>
<hr />
<p>Does this event align with the agent's core values and beliefs?</p>
</li>
<li>
<p><strong>Social Approval</strong></p>
<hr />
<p>How do other agents perceive this event and the agent's role in it?</p>
</li>
</ul>
</div>
<p><strong>Emotion-Cognition Integration:</strong></p>
<ul>
<li><strong>Attention</strong>: Emotional salience affects what agents notice and remember</li>
<li><strong>Learning</strong>: Emotional states modulate learning rates and generalization</li>
<li><strong>Decision-Making</strong>: Current mood influences risk-taking and cooperation</li>
<li><strong>Memory</strong>: Emotional experiences receive enhanced consolidation</li>
</ul>
<hr />
<h2 id="system-integration-patterns">System Integration Patterns</h2>
<h3 id="provider-pattern-implementation">Provider Pattern Implementation</h3>
<p>The provider pattern enables world-agnostic cognitive systems to access world-specific data:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># World-agnostic cognitive system</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">ReflectionSystem</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simulation_state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">cognitive_scaffold</span><span class="p">):</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">simulation_state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">cognitive_scaffold</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vitality_provider</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Injected at runtime</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reflect_on_experience</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>        <span class="c1"># Use provider to get world-specific context</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>        <span class="n">vitality_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vitality_provider</span><span class="o">.</span><span class="n">get_normalized_vitality_metrics</span><span class="p">(</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>            <span class="n">agent_id</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">config</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>        <span class="c1"># Generate reflection using world-agnostic logic + world-specific data</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_reflection</span><span class="p">(</span><span class="n">vitality_data</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="c1"># World-specific provider implementation</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="k">class</span><span class="w"> </span><span class="nc">FantasyWorldVitalityProvider</span><span class="p">(</span><span class="n">VitalityMetricsProviderInterface</span><span class="p">):</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_normalized_vitality_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>        <span class="n">health</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">HealthComponent</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>        <span class="n">mana</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ManaComponent</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>        <span class="n">stamina</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">StaminaComponent</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>            <span class="s2">&quot;physical_health&quot;</span><span class="p">:</span> <span class="n">health</span><span class="o">.</span><span class="n">current</span> <span class="o">/</span> <span class="n">health</span><span class="o">.</span><span class="n">maximum</span><span class="p">,</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>            <span class="s2">&quot;magical_energy&quot;</span><span class="p">:</span> <span class="n">mana</span><span class="o">.</span><span class="n">current</span> <span class="o">/</span> <span class="n">mana</span><span class="o">.</span><span class="n">maximum</span><span class="p">,</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>            <span class="s2">&quot;physical_endurance&quot;</span><span class="p">:</span> <span class="n">stamina</span><span class="o">.</span><span class="n">current</span> <span class="o">/</span> <span class="n">stamina</span><span class="o">.</span><span class="n">maximum</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>        <span class="p">}</span>
</code></pre></div>
<h3 id="event-driven-state-management">Event-Driven State Management</h3>
<p>All state changes flow through the event bus, creating an auditable trail:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant Agent
    participant ActionSystem
    participant WorldSystem
    participant CognitiveSystem
    participant EventBus

    Agent-&gt;&gt;ActionSystem: Choose Action
    ActionSystem-&gt;&gt;EventBus: Publish "action_chosen"
    EventBus-&gt;&gt;WorldSystem: Notify action execution
    WorldSystem-&gt;&gt;EventBus: Publish "action_outcome"
    EventBus-&gt;&gt;CognitiveSystem: Update learning
    EventBus-&gt;&gt;ActionSystem: Calculate final reward
    ActionSystem-&gt;&gt;EventBus: Publish "action_completed"</code></pre>
<h3 id="concurrent-system-execution">Concurrent System Execution</h3>
<p>Systems execute concurrently while maintaining data consistency:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute_simulation_tick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tick</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute one simulation tick with concurrent systems.&quot;&quot;&quot;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="c1"># Phase 1: Perception and decision-making (can run concurrently)</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">decision_tasks</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">perception_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">),</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">goal_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">),</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">decision_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="p">]</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">decision_tasks</span><span class="p">)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="c1"># Phase 2: Action execution (sequential for determinism)</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="c1"># Phase 3: World updates (can run concurrently)</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="n">world_tasks</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">movement_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">),</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">combat_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">),</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">environment_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>    <span class="p">]</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">world_tasks</span><span class="p">)</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>    <span class="c1"># Phase 4: Learning and reflection (can run concurrently)</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>    <span class="n">learning_tasks</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">q_learning_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">),</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reflection_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">),</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">identity_system</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>    <span class="p">]</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">learning_tasks</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="performance-considerations">Performance Considerations</h2>
<h3 id="scalability-architecture">Scalability Architecture</h3>
<p>ARLA is designed to scale from single-agent studies to large population simulations:</p>
<p><strong>Agent Scaling:</strong>
- <strong>1-100 agents</strong>: Single-threaded execution with full cognitive features
- <strong>100-1,000 agents</strong>: Concurrent system execution with selective cognitive features
- <strong>1,000+ agents</strong>: Distributed execution with cognitive feature batching</p>
<p><strong>Memory Management:</strong>
- Component pooling to reduce allocation overhead
- Lazy loading of memory and historical data
- Automatic garbage collection of old experiences</p>
<h3 id="llm-integration-optimization">LLM Integration Optimization</h3>
<p>Large Language Model calls are the primary performance bottleneck, addressed through:</p>
<p><strong>Caching Strategies:</strong>
- Prompt caching for repeated reflection patterns
- Response caching for similar contexts
- Semantic similarity matching for near-duplicates</p>
<p><strong>Batching Mechanisms:</strong>
- Batch multiple agent reflections into single API calls
- Priority queuing for time-sensitive operations
- Background processing for non-critical reflections</p>
<p><strong>Cost Management:</strong>
- Token usage monitoring and budget enforcement
- Adaptive reflection frequency based on available budget
- Fallback to rule-based reasoning when LLM unavailable</p>
<hr />
<h2 id="research-applications">Research Applications</h2>
<h3 id="ablation-studies">Ablation Studies</h3>
<p>ARLA's modular architecture enables precise ablation studies:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Study the effect of identity on cooperation</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">configs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    <span class="p">{</span><span class="s2">&quot;systems&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ActionSystem&quot;</span><span class="p">,</span> <span class="s2">&quot;QLearningSystem&quot;</span><span class="p">,</span> <span class="s2">&quot;IdentitySystem&quot;</span><span class="p">]},</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="p">{</span><span class="s2">&quot;systems&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ActionSystem&quot;</span><span class="p">,</span> <span class="s2">&quot;QLearningSystem&quot;</span><span class="p">]},</span>  <span class="c1"># No identity</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">]</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1"># Study the effect of emotion on decision-making</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="n">configs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    <span class="p">{</span><span class="s2">&quot;affect_system&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}},</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    <span class="p">{</span><span class="s2">&quot;affect_system&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}},</span>  <span class="c1"># No emotions</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="p">]</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="c1"># Study the effect of causal reasoning on learning</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="n">configs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    <span class="p">{</span><span class="s2">&quot;q_learning&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;use_causal_rewards&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}},</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>    <span class="p">{</span><span class="s2">&quot;q_learning&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;use_causal_rewards&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}},</span>  <span class="c1"># Raw rewards only</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="p">]</span>
</code></pre></div>
<h3 id="emergent-behavior-studies">Emergent Behavior Studies</h3>
<p>The architecture supports studying emergence at multiple levels:</p>
<ul>
<li><strong>Individual</strong>: How do cognitive components interact to produce behavior?</li>
<li><strong>Dyadic</strong>: How do pairs of agents develop relationships and cooperation?</li>
<li><strong>Group</strong>: How do social norms and hierarchies emerge in populations?</li>
<li><strong>Population</strong>: How do cultural patterns and institutions develop over time?</li>
</ul>
<h3 id="reproducibility-features">Reproducibility Features</h3>
<p>Research reproducibility is built into the architecture:</p>
<ul>
<li><strong>Deterministic Execution</strong>: Exact reproduction with identical random seeds</li>
<li><strong>Configuration Versioning</strong>: Git-tracked configuration with validation</li>
<li><strong>State Snapshots</strong>: Complete simulation state capture at any point</li>
<li><strong>Experiment Tracking</strong>: Automatic logging of hyperparameters and results</li>
</ul>
<hr />
<h2 id="extension-points">Extension Points</h2>
<h3 id="adding-new-cognitive-systems">Adding New Cognitive Systems</h3>
<p>Create custom cognitive capabilities by extending the System base class:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">CreativitySystem</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom system for modeling creative problem-solving.&quot;&quot;&quot;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simulation_state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">cognitive_scaffold</span><span class="p">):</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">simulation_state</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">cognitive_scaffold</span><span class="p">)</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_bus</span><span class="p">:</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">event_bus</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;problem_encountered&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_creative_solution</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">generate_creative_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_data</span><span class="p">):</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>        <span class="c1"># Custom creative reasoning logic</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>        <span class="k">pass</span>
</code></pre></div>
<h3 id="creating-new-provider-interfaces">Creating New Provider Interfaces</h3>
<p>Define domain-specific data access patterns:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">CreativityContextProviderInterface</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface for providing creativity-relevant context.&quot;&quot;&quot;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_creative_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">components</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return available creative resources and constraints.&quot;&quot;&quot;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        <span class="k">pass</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_inspiration_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">components</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return potential sources of creative inspiration.&quot;&quot;&quot;</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>        <span class="k">pass</span>
</code></pre></div>
<h3 id="world-integration">World Integration</h3>
<p>Integrate ARLA with existing simulation environments:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ExternalWorldAdapter</span><span class="p">:</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Adapter pattern for integrating external simulation engines.&quot;&quot;&quot;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">external_sim</span><span class="p">,</span> <span class="n">arla_simulation_state</span><span class="p">):</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">external_sim</span> <span class="o">=</span> <span class="n">external_sim</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">arla_state</span> <span class="o">=</span> <span class="n">arla_simulation_state</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sync_states</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Synchronize state between ARLA and external simulation.&quot;&quot;&quot;</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>        <span class="c1"># Extract state from external simulation</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>        <span class="n">external_entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">external_sim</span><span class="o">.</span><span class="n">get_all_entities</span><span class="p">()</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>        <span class="c1"># Update ARLA components</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>        <span class="k">for</span> <span class="n">entity_id</span><span class="p">,</span> <span class="n">external_state</span> <span class="ow">in</span> <span class="n">external_entities</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_update_arla_components</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">external_state</span><span class="p">)</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_arla_components</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">external_state</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert external state to ARLA components.&quot;&quot;&quot;</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>        <span class="c1"># Convert position</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>        <span class="k">if</span> <span class="s2">&quot;position&quot;</span> <span class="ow">in</span> <span class="n">external_state</span><span class="p">:</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>            <span class="n">pos_comp</span> <span class="o">=</span> <span class="n">PositionComponent</span><span class="p">(</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>                <span class="n">x</span><span class="o">=</span><span class="n">external_state</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>                <span class="n">y</span><span class="o">=</span><span class="n">external_state</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>            <span class="p">)</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">arla_state</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">pos_comp</span><span class="p">)</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>        <span class="c1"># Convert health</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>        <span class="k">if</span> <span class="s2">&quot;health&quot;</span> <span class="ow">in</span> <span class="n">external_state</span><span class="p">:</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>            <span class="n">health_comp</span> <span class="o">=</span> <span class="n">HealthComponent</span><span class="p">(</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>                <span class="n">current_health</span><span class="o">=</span><span class="n">external_state</span><span class="p">[</span><span class="s2">&quot;health&quot;</span><span class="p">][</span><span class="s2">&quot;current&quot;</span><span class="p">],</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>                <span class="n">max_health</span><span class="o">=</span><span class="n">external_state</span><span class="p">[</span><span class="s2">&quot;health&quot;</span><span class="p">][</span><span class="s2">&quot;maximum&quot;</span><span class="p">]</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>            <span class="p">)</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">arla_state</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">entity_id</span><span class="p">,</span> <span class="n">health_comp</span><span class="p">)</span>
</code></pre></div>
<p>ARLA's architecture provides a robust foundation for agent-based modeling research while maintaining the flexibility needed for diverse simulation scenarios and experimental designs.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Bordumb / Renbytes
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/renbytes" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/arla/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>